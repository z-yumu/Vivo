<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>商家后台管理</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="/static/admin/assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="/static/admin/assets/font-awesome/4.5.0/css/font-awesome.min.css" />

		<!-- page specific plugin styles -->

		<!-- text fonts -->
		<link rel="stylesheet" href="/static/admin/assets/css/fonts.googleapis.com.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="/static/admin/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="/static/admin/assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="/static/admin/assets/css/ace-rtl.min.css" />
		<link rel="stylesheet" href="/static/admin/assets/css/sanji.css" />

		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="/static/admin/assets/js/ace-extra.min.js"></script>
		  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->
</head>
<div class="main-content">
<div class="main-content-inner">
<div class="breadcrumbs ace-save-state" id="breadcrumbs">
<ul class="breadcrumb">
	<li>
		<i class="ace-icon fa fa-home home-icon"></i>
		<a href="#">主页</a>
	</li>

	<li>
		<a href="#">店铺管理</a>
	</li>
	<li class="active">申请开店</li>
</ul><!-- /.breadcrumb -->

<div class="nav-search" id="nav-search">
	<form class="form-search">
		<span class="input-icon">
			<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
			<i class="ace-icon fa fa-search nav-search-icon"></i>
		</span>
	</form>
</div><!-- /.nav-search -->
</div>

<div class="page-content">
<div class="ace-settings-container" id="ace-settings-container">
	<div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
		<i class="ace-icon fa fa-cog bigger-130"></i>
	</div>

	<div class="ace-settings-box clearfix" id="ace-settings-box">
		<div class="pull-left width-50">
			<div class="ace-settings-item">
				<div class="pull-left">
					<select id="skin-colorpicker" class="hide">
						<option data-skin="no-skin" value="#438EB9">#438EB9</option>
						<option data-skin="skin-1" value="#222A2D">#222A2D</option>
						<option data-skin="skin-2" value="#C6487E">#C6487E</option>
						<option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
					</select>
				</div>
				<span>&nbsp; Choose Skin</span>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-navbar" autocomplete="off" />
				<label class="lbl" for="ace-settings-navbar"> Fixed Navbar</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-sidebar" autocomplete="off" />
				<label class="lbl" for="ace-settings-sidebar"> Fixed Sidebar</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-breadcrumbs" autocomplete="off" />
				<label class="lbl" for="ace-settings-breadcrumbs"> Fixed Breadcrumbs</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl" autocomplete="off" />
				<label class="lbl" for="ace-settings-rtl"> Right To Left (rtl)</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-add-container" autocomplete="off" />
				<label class="lbl" for="ace-settings-add-container">
					Inside
					<b>.container</b>
				</label>
			</div>
		</div><!-- /.pull-left -->

		<div class="pull-left width-50">
			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-hover" autocomplete="off" />
				<label class="lbl" for="ace-settings-hover"> Submenu on Hover</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-compact" autocomplete="off" />
				<label class="lbl" for="ace-settings-compact"> Compact Sidebar</label>
			</div>

			<div class="ace-settings-item">
				<input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-highlight" autocomplete="off" />
				<label class="lbl" for="ace-settings-highlight"> Alt. Active Item</label>
			</div>
		</div><!-- /.pull-left -->
	</div><!-- /.ace-settings-box -->
</div><!-- /.ace-settings-container -->

<div class="page-header">
	<h1>
		店铺申请
		<small>
			<i class="ace-icon fa fa-angle-double-right"></i>
			基本信息
		</small>
	</h1>
</div><!-- /.page-header -->

<div class="row">
	<div class="col-xs-12">
		<!-- PAGE CONTENT BEGINS -->
		<form action="{:url('Shop/save')}" method="post" class="form-horizontal" role="form">
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 商铺名称： {$merchantinfos.name}</label>

				<div class="col-sm-9">
					<input name="mingcheng" value="{$merchantinfos.province}" type="text" id="mingcheng" placeholder="店铺名称" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 经营项目： </label>

				<div class="col-sm-9">
					<select name="operating" class="col-xs-10 col-sm-5" id="form-field-select-1">
					{volist name="firstcategorys" id="vo"}     
						<option value="{$vo.id}">{$vo.name}</option>
					{/volist}	
					</select>
				</div>
			</div>
		
             <div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 商铺图标： </label>

				<div class="col-sm-9">
					<div class="row">
						<div class="col-sm-9">
							<div class="widget-box">
								<div class="widget-header">
									<h4 class="widget-title">商铺图片</h4>
									<div class="widget-toolbar">
										<a href="#" data-action="collapse">
											<i class="ace-icon fa fa-chevron-up"></i>
										</a>

										<a href="#" data-action="close">
											<i class="ace-icon fa fa-times"></i>
										</a>
									</div>
								</div>
								<div class="widget-body">
									<div class="widget-main">
										<div class="form-group">
											<div class="col-xs-12">
									
选择图像文件：<input type="file" class="file" name="image" id="file"><br/>
<input name="picture" type="hidden" value="" id="picture">
<button onclick="return false;" id='sub'>点击上传</button>
<div id="content"></div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
				</div>
			</div>
				<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 地区 ：</label>

				
					<div class="col-sm-9">
   

            <!--省份选择-->
            <select name="prov" id="prov" onchange="showCity(this)">
                <option>=请选择省份=</option>

            </select>
            <input name="provid" type="hidden" value="{$merchantinfos.province}" id="provid">

            <!--城市选择-->
            <select name="city" id="city" onchange="showCountry(this)">
                <option>=请选择城市=</option>
            </select>
             <input name="cityid" type="hidden" value="{$merchantinfos.city}" id="cityid">
            <!--县区选择-->
            <select name="country" id="country" onchange="selecCountry(this)">
                <option>=请选择县区11=</option>
            </select>
             <input name="countryid" type="hidden" value="{$merchantinfos.country}" id="countryid">
            <button type="button" class="btn met1" onClick="showAddr()">确定</button>
     
</div>
				
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 地址： </label>

				<div class="col-sm-9">
					<input name="link" type="text" id="addr-show" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 联系人： </label>

				<div class="col-sm-9">
					<select name="status" class="col-xs-10 col-sm-5" id="form-field-select-1">
					<option value="1">显示</option>
					<option value="0">不显示</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 手机： </label>

				<div class="col-sm-9">
					<select name="status" class="col-xs-10 col-sm-5" id="form-field-select-1">
					<option value="1">显示</option>
					<option value="0">不显示</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> QQ： </label>

				<div class="col-sm-9">
					<select name="status" class="col-xs-10 col-sm-5" id="form-field-select-1">
					<option value="1">显示</option>
					<option value="0">不显示</option>
					</select>
				</div>
			</div>
            <div class="page-header">
				<h1>
					店铺申请
					<small>
						<i class="ace-icon fa fa-angle-double-right"></i>
						公司信息
					</small>
				</h1>
			</div><!-- /.page-header -->

            <div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 公司名称 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 营业执照号码 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 营业执照照片 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 营业执照地址 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 法人 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="page-header">
				<h1>
					店铺申请
					<small>
						<i class="ace-icon fa fa-angle-double-right"></i>
						结算银行信息
					</small>
				</h1>
			</div><!-- /.page-header -->

            <div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 账户 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 账号 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 银行 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 开户行 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 网点 ：</label>

				<div class="col-sm-9">
					<input name="order" type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5" />
				</div>
			</div>

			<div class="clearfix form-actions">
				<div class="col-md-offset-3 col-md-9">
					<button class="btn btn-info" type="submit">
						<i class="ace-icon fa fa-check bigger-110"></i>
						提交
					</button>

					&nbsp; &nbsp; &nbsp;
					<button class="btn" type="reset">
						<i class="ace-icon fa fa-undo bigger-110"></i>
						重置
					</button>
				</div>
			</div>
		<!-- </form> -->
	</div><!-- /.col -->
</div><!-- /.row -->
</div><!-- /.page-content -->
</div>
</div><!-- /.main-content -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
<script type="text/javascript">
$('#sub').click(function () {
	 // alert("测试");
     ajaxPost();
}) 
function ajaxPost(){
   var formData=new FormData();
   if($('#file')[0].files.length<=0){
   	alert("请选择文件");
   	return;
   }
    formData.append('image',$('#file')[0].files[0]);
    $.ajax({
     type:'post',
     url:"{:url('Shop/picture')}",
     data:formData,
     cache:false,
     processData:false,
     contentType:false,
	  success:function(data){
	  if(data){
	   var html='<img src="'+data.src+'" width="480" height="135">';
	   $('#content').html(html);
	   $('[name=picture]').val(data.src)
	   }else{
	   	alert("上传失败");
	   }

     }
   })
}
</script>

<script src="/static/admin/assets/liandong/city.js"></script>


<script src="/static/admin/assets/liandong/method01.js"></script>

<script type="text/javascript">
    var options=document.getElementById("prov").options;
    var options1=document.getElementById("city").options;
    var options2=document.getElementById("country").options;
    	// alert(options.length);
    var mingcheng = document.getElementById("mingcheng").value; 
    var provid = document.getElementById("provid").value;  
    var cityid = document.getElementById("cityid").value;  
    var countryid = document.getElementById("countryid").value; 
//****************针对第一种方式的具体js实现部分******************//
//****************所使用的数据是city.js******************//

/*根据id获取对象*/
function $(str) {
    return document.getElementById(str);
}

var addrShow = $('addr-show');
var btn = document.getElementsByClassName('met1')[0];
var prov = $('prov');
var city = $('city');
var country = $('country');


/*用于保存当前所选的省市区*/
var current = {
    prov: '',
    city: '',
    country: ''
};

/*自动加载省份列表*/
(function showProv() {
    btn.disabled = true;
    var len = provice.length;
    for (var i = 0; i < len; i++) {
        var provOpt = document.createElement('option');
        provOpt.innerText = provice[i]['name'];
        provOpt.value = i;
        prov.appendChild(provOpt);
    }
    for (var i = 0; i < len; i++) {
      if(mingcheng == i){
      document.getElementById("mingcheng").value = provice[i]['name'];
      }

    }
    for(var i=0;i<options.length;i++){
        if(provid==options[i].value){
            options[i].selected=true;
            break;
        }
    }

    var val = provid;
    if (val != current.prov) {
        current.prov = val;
        addrShow.value = '';
        btn.disabled = true;
    }
    //console.log(val);
    if (val != null) {
        city.length = 1;
        var cityLen = provice[val]["city"].length;
        for (var j = 0; j < cityLen; j++) {
            var cityOpt = document.createElement('option');
            cityOpt.innerText = provice[val]["city"][j].name;
            cityOpt.value = j;
            city.appendChild(cityOpt);
        }
    }
    for(var i=0;i<options1.length;i++){
        if(cityid==options1[i].value){
            options1[i].selected=true;
            break;
        }
    }
    var val = cityid;
    current.city = val;
    if (val != null) {
        country.length = 1; //清空之前的内容只留第一个默认选项
        var countryLen = provice[current.prov]["city"][val].districtAndCounty.length;
        if(countryLen == 0){
            addrShow.value = provice[current.prov].name + '-' + provice[current.prov]["city"][current.city].name;
            return;
        }
        for (var n = 0; n < countryLen; n++) {
            var countryOpt = document.createElement('option');
            countryOpt.innerText = provice[current.prov]["city"][val].districtAndCounty[n];
            countryOpt.value = n;
            country.appendChild(countryOpt);
        }
    }
    for(var i=0;i<options2.length;i++){
        if(countryid==options2[i].value){
            options2[i].selected=true;
            break;
        }
    }

})();

/*根据所选的省份来显示城市列表*/
function showCity(obj) {
    var val = obj.options[obj.selectedIndex].value;
    if (val != current.prov) {
        current.prov = val;
        addrShow.value = '';
        btn.disabled = true;
    }
    //console.log(val);
    if (val != null) {
        city.length = 1;
        var cityLen = provice[val]["city"].length;
        for (var j = 0; j < cityLen; j++) {
            var cityOpt = document.createElement('option');
            cityOpt.innerText = provice[val]["city"][j].name;
            cityOpt.value = j;
            city.appendChild(cityOpt);
        }
    }
    for(var i=0;i<options1.length;i++){
        if(cityid==options1[i].value){
            options1[i].selected=true;
            break;
        }
    }
}

/*根据所选的城市来显示县区列表*/
function showCountry(obj) {
    var val = obj.options[obj.selectedIndex].value;
    current.city = val;
    if (val != null) {
        country.length = 1; //清空之前的内容只留第一个默认选项
        var countryLen = provice[current.prov]["city"][val].districtAndCounty.length;
        if(countryLen == 0){
            addrShow.value = provice[current.prov].name + '-' + provice[current.prov]["city"][current.city].name;
            return;
        }
        for (var n = 0; n < countryLen; n++) {
            var countryOpt = document.createElement('option');
            countryOpt.innerText = provice[current.prov]["city"][val].districtAndCounty[n];
            countryOpt.value = n;
            country.appendChild(countryOpt);
        }
    }
    for(var i=0;i<options2.length;i++){
        if(countryid==options2[i].value){
            options2[i].selected=true;
            break;
        }
    }
}

/*选择县区之后的处理函数*/
function selecCountry(obj) {
    current.country = obj.options[obj.selectedIndex].value;
    if ((current.city != null) && (current.country != null)) {
        btn.disabled = false;
    }
}

/*点击确定按钮显示用户所选的地址*/
function showAddr() {
    addrShow.value = provice[current.prov].name + '-' + provice[current.prov]["city"][current.city].name + '-' + provice[current.prov]["city"][current.city].districtAndCounty[current.country];
}
//显示省
    for(var i=0;i<options.length;i++){
        if(provid==options[i].value){
            options[i].selected=true;
            break;
        }
    }


/*选择县区之后的处理函数*/
function selecCountry(obj) {
    current.country = obj.options[obj.selectedIndex].value;
    if ((current.city != null) && (current.country != null)) {
        btn.disabled = false;
    }
}

/*点击确定按钮显示用户所选的地址*/
function showAddr() {
    addrShow.value = provice[current.prov].name + '-' + provice[current.prov]["city"][current.city].name + '-' + provice[current.prov]["city"][current.city].districtAndCounty[current.country];
}
</script>